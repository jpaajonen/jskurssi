<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Projekti 1 (Paajonen)</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <script>
        var arr = new Array();
        function addData() {
//            getData();     
            arr.push({
                taskId:document.getElementById("taskId").innerText
            });

            localStorage.setItem("localData", JSON.stringify(arr));
 //           showData();

        }

        function getData() {
            var str = localStorage.getItem("localData");

            if (str != null) {
                arr = JSON.parse(str);
            }
        }
 //       function deleteData() {
 //           localStorage.clear()
 //       }

        function showData(){
            getData();
            var table = document.getElementById("tbody");

            var x = table.rows.length;
            while (--x) {
                table.deleteRow(x);
            }

            for (i = 0; i < arr.length; i++) {         
                var row = table.insertRow(-1);
                var cell = row.insertCell(0);
                cell.innerHTML = arr[i].taskId;
            }
        }

        function addTask() {
            var table = document.getElementById("tbody");
            var field = document.getElementById("tekstikentta");
            if (field.value.length < 3) {
                alert("Kirjoita oikea tehtävä!");
                field.style.borderColor = "red";
            } else {
                field.style.borderColor = "black";
                var row = table.insertRow(-1);
                var cell = row.insertCell(0);
                cell.id = "taskId";
                cell.onclick = function uncheck() {
                    row.style = "text-decoration: none"
                }
                cell.innerHTML = field.value;
            }
            field.value = "";
            var cell2 = row.insertCell(1);
            var valinta = document.createElement("input");
            valinta.onclick = function check() {
                row.style = "text-decoration: line-through";
            }
            valinta.type = "checkbox";
            valinta.name = "cbox";
            valinta.id = "cb";
            cell2.appendChild(valinta);
            addData();
        }

        function removeTask() {
            var table = document.getElementById("ToDoListTable").tBodies[0];
            var rowCount = table.rows.length;
            for (var i = 0; i < rowCount; i++) {
                var row = table.rows[i];
                var cb = row.cells[1].getElementsByTagName("input")[0];
                if ("checkbox" == cb.type && true == cb.checked) {
                    table.deleteRow(i);
                    i--;
                }
            }
        }




</script>

    <table id="ToDoListTable" width="400px" border="1">
        <thead>
            <tr>
                <th>To do -lista</th>
            </tr>
        </thead>
        <tbody id="tbody">
        </tbody>
        <tfoot></tfoot>
    </table>
    <p>
        Tehtävä
        <label for="tekstikentta">:</label>
        <input type="text" name="teksti" id="tekstikentta" placeholder="Kirjoita tehtävä...">
        <br>
        <button onclick="addTask('ToDoListTable')" id="adder">Lisää</button>
        <button onclick="removeTask('ToDoListTable')" id="remover">Poista</button>


    </p>

</body>
</html>